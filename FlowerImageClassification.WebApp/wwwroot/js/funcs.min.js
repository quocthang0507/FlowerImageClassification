function getRandomArbitraryNumber(n,t){return Math.round(Math.random()*(t-n)+n)}function takeSnapshot(){Webcam.snap(function(n){document.getElementById("inputWebcam").src=n})}function addLoadingClass(){$("body").addClass("loading")}function removeLoadingClass(){$("body").removeClass("loading")}function validateFileExtension(){var n=document.querySelector("[type=file]"),i=n.value,t;if(n.files.length==0)alert("Hình ảnh không được để trống!");else if(/(\.jpg|\.png)$/i.exec(i)){if(n.files&&n.files[0])return t=new FileReader,t.onload=function(n){document.getElementById("divResult_left").style.visibility="visible";document.getElementById("divImagePreview").innerHTML='<img class="imgPreview" src="'+n.target.result+'"/>'},t.readAsDataURL(n.files[0]),!0}else alert("Chỉ chấp nhận hình JPG và PNG!"),n.value="";return!1}function customFileInput(){$(".custom-file-input").on("change",function(){var n=$(this).val().split("\\").pop();$(this).siblings(".custom-file-label").addClass("selected").html(n)})}function uploadAndClassify(n){var t,i,r;if(n.preventDefault(),t="",i=new FormData,inputFile!=null){const n=inputFile.files;if(!validateFileExtension())return;i.append("imageFile",n[0]);t="api/ClassifyImage"}else r=document.getElementById("inputWebcam").src,i.append("base64image",r),t="api/ClassifyBase64";addLoadingClass();fetch(t,{method:"POST",body:i}).then(n=>n.json()).then(n=>{console.log("Đã nhận được phản hồi: ",n),document.getElementById("divResult_right").style.visibility="visible",document.getElementById("divImageId").innerHTML="Tên tập tin vừa tải lên: "+n.imageID,document.getElementById("divPrediction").innerHTML=`Kết quả dự đoán là: ${dict[n.predictedLabel]} (${n.predictedLabel})`,document.getElementById("divProbability").innerHTML="Xác suất: "+(n.probability*100).toFixed(3)+"%",document.getElementById("divExecutionTime").innerHTML="Thời gian dự đoán: "+n.predictionExecutionTime+" mili giây",getInfo(n.predictedLabel),removeLoadingClass()}).catch(n=>{console.error("Đã có lỗi xảy ra: ",n),alert("Đã có lỗi xảy ra, vui lòng thử lại."),removeLoadingClass()})}function SubmitUserSentiment(n){var i,t,r;n.preventDefault();i="api/AddSentiment";t=new FormData;const u=document.getElementById("divImageId"),f=document.getElementById("divPrediction"),e=document.getElementById("chkIncorrect"),o=document.getElementById("chkUnuseful"),s=document.getElementById("chkDelay"),h=document.getElementById("chkHard"),c=document.getElementById("tbxSentiment"),l={FileName:u.value,PredictedLabel:f.value,IncorrectPredictionVotes:e.value,UnusefulInfoVotes:o.value,DelayResponseVotes:s.value,HardToUseVotes:h.value,MoreInfo:c.value};if(inputFile!=null){const n=inputFile.files;if(!validateFileExtension())return;t.append("imageFile",n[0]);t.append("sentiment",l);i="api/AddSentiment"}else r=document.getElementById("inputWebcam").src,t.append("base64image",r),i="api/ClassifyBase64";fetch(i,{method:"POST",body:t}).then(n=>n.json()).then(n=>{$("#modal-sentiment").modal("toggle"),setTimeout(()=>$("#modal-thank").modal("toggle"),500),console.log("Đã nhận được phản hồi: ",n)}).catch(n=>{console.error("Lỗi gửi phản hồi:",n),alert("Lỗi gửi phản hồi lên server.")});$("#modal-sentiment").modal("toggle")}function getInfo(n){var t="api/GetInfo/"+n;$.get(t,function(n){document.querySelector("#modal-info > div > div > div.modal-body").innerHTML=n})}